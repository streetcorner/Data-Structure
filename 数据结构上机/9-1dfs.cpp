/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File name: 09graph.cpp
Abstract:
1.Create a graph by adjacency list and display it.
2.DFS
Version: 1.0
Last modify:2016.12.8
Copyright(c) 2016 Wang Yumeng
All rights reserved.

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
#include<stdio.h>
#include<stdlib.h>
#include<iostream>

//图的邻接表存储表示
#define MAX_VERTEX_NUM 20
using namespace std;

//邻接表表示
typedef char VertexData; //顶点数据类型
typedef int EdgeData;              //边上权值类型
//边结点
typedef struct node {
    int dest;                 //目标顶点下标
    EdgeData cost;//int        //边上的权值
    struct node * link;      //下一边链接指针
} EdgeNode;
//顶点结点
typedef struct {
    VertexData data;       //顶点数据域
    EdgeNode *firstAdj;   //边链表 头指针
} VertexNode;
typedef struct { //图的邻接表
    VertexNode VexList[MAX_VERTEX_NUM]; //邻接表
    int n, e;      //图中当前的顶点个数与边数
} AdjGraph;

//邻接表的构造算法(无向图)
void CreateGraph (AdjGraph &G) {
    int tail,head,weight;
    printf("Please input the number of vertex and edges:\n");
    scanf ("%d %d", &G.n, &G.e);
//输入顶点个数和边数
    //cout<<G.n<<endl;
    for ( int i = 0; i < G.n; i++) {
        printf("Please input the data of the %dth vertex:\n",i);
        scanf("%d",&G.VexList[i].data ); //输入顶点信息
        G.VexList[i].firstAdj = NULL;
    }
    for (int i = 0; i < G.e; i++) {         //逐条边输入
        printf("Please input the[tail head weight] of the %dth edge:\n(the tail and head is the index of the node)\n",i);
        scanf ("%d %d %d",&tail,&head,&weight );
        //链入第 tail 号链表的前端
        EdgeNode *p = new EdgeNode;
        p->dest = head;   p->cost = weight;
        p->link = G.VexList[tail].firstAdj;//头插
        G.VexList[tail].firstAdj = p;

        //链入第 head 号链表的前端
		p = new EdgeNode;//分配空间
        p->dest = tail;   p->cost = weight;
        p->link = G.VexList[head].firstAdj;//头插
        G.VexList[head].firstAdj = p;
    }
}

void display(AdjGraph &g){
    printf("The adjacent list is as follows:\n");
    for(int i = 0; i < g.n; i++){
        EdgeNode *p = new EdgeNode;
        p = g.VexList[i].firstAdj;//头结点
        //printf("vertex data:%d \n",p->dest);
        printf("vertex data:%d",g.VexList[i].data);
        while(p){
            printf(" dest:%d cost:%d ",p->dest,p->cost);
            p=p->link;
        }
        printf("\n");
    }
}
char GetValue(AdjGraph G, int v){
    return G.VexList[v].data;
}
int GetFirstNeighbor(AdjGraph g, int v){
    if(g.VexList[v].firstAdj)
        return g.VexList[v].firstAdj->dest;
    else return -1;
}
int GetNextNeighbor(AdjGraph g, int v, int w){
    EdgeNode *p = new EdgeNode;
    p = g.VexList[v].firstAdj;
    while(p){
        if(p->dest == w && p->link){//next node exists
            return p->link->dest;
        }
        p=p->link;
    }
    return -1;
}
//图的深度优先搜索算法-1
void DFS (AdjGraph G, int v, int visited[ ] ) {
    printf("%d " , GetValue (G, v) ); //访问顶点 v
    visited[v] = 1;		     //顶点 v 作访问标记
    int w = GetFirstNeighbor (G, v);
      //取 v 的第一个邻接顶点 w
    while ( w != -1 ) {	       //若邻接顶点 w 存在
        if ( !visited[w]) DFS(G, w, visited );
        //若顶点 w 未访问过, 递归访问顶点 w
        w = GetNextNeighbor (G, v, w );
        //取顶点 v 排在 w 后的下一个邻接顶点
    }
}
//图的深度优先搜索算法-2
void Graph_Traverse (AdjGraph G) {
    printf("\nThe result of the DFS traverse is as follow:\n");
    int *visited = new int [G.n];
    for ( int i = 0; i < G.n; i++ )
        visited [i] = 0;   //访问数组 visited 初始化
    for ( int i = 0; i < G.n; i++ )
        if ( ! visited[i] ) {
            DFS (G, i, visited );
        }//从顶点 i 出发开始搜索
    delete [ ]visited;   //释放 visited
}

int main(){
    AdjGraph g;
    CreateGraph(g);
    //cout<<g.n<<" "<<g.e<<endl;
    display(g);
    Graph_Traverse(g);
}



