/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File name: 02sequence_stack.cpp
Abstract:
1.initial,push,pop a sequence stack.
Version: 1.0
Last modify:2016.12.4
Copyright(c) 2016 Wang Yumeng
All rights reserved.
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

#include <stdio.h>
#include <stdlib.h>
#include <iostream>

using namespace std;
#define OK               1
#define ERROR            0
#define OVERFLOW         -2

typedef int Status;

#define STACK_INIT_SIZE  100//栈存储空间的初始分配量
#define STACKINCREMENT   10//  栈存储空间的分配增量

typedef char SElemType;
typedef struct{
	SElemType *base;//栈空间基址称为栈底指针，指向栈底位
	SElemType *top; //栈顶指针,约定栈顶指针指向栈顶元素的
							  //下（后面）一个位置；
	int stacksize;     //当前分配的栈空间大小
                   //（以sizeof(SElemType)为单位）
}SqStack;// SqStack:：结构类型名

int initStack_Sq(SqStack &S)  {      //构造一个空栈S
	S.base=(SElemType * )malloc(STACK_INIT_SIZE  *sizeof(SElemType));
      //为顺序栈动态分配存储空间
	if (! S. base) exit(OVERFLOW);    //存储分配失败
	S.top=S.base;
	S.stacksize=STACK_INIT_SIZE;
	return OK;
}//InitStack_Sq

void push(SqStack &S, SElemType e) {      //将元素e插入栈成为新的栈顶元素,要考虑上溢情况
      if (S.top-S.base>=S.stacksize) {
		//栈满，追加存储空间
		  S.base= (SElemType * )realloc(S.base,(S.stacksize +STACKINCREMENT)*sizeof(SElemType));
          if (!S. base) exit(OVERFLOW);  //存储分配失败
		  S.top=S.base+S.stacksize;
		  S.stacksize+=STACKINCREMENT;
        }
        *S.top++=e;     //元素e 插入栈顶，修改栈顶指针
}//Push

int pop(SqStack &S, SElemType &e) {  //若栈不空，则删除S的栈顶元素，用e 返回其值并返回OK
//否则返回ERROR
	if (S.top== S.base) return ERROR;
	//栈空，返回ERROR
	e = * --S.top;
	//删除栈顶元素，用e 返回其值，并修改栈顶指针
	return OK;
} //Pop

int GetTop_Sq(SqStack S, SElemType &e) {       // 若栈不空，则用e返回S的栈顶元素，并返回OK；
	//否则返回ERROR
       if (S.top ==S.base)  return ERROR; //若栈为空
	   e = * (S.top-1);
	   return OK;}//GetTop_Sq

void display(SqStack &s){
    printf("The stack contains:\n");
    SElemType e;
    while(pop(s,e))
        printf("%c ",e);
}
int main(){
	SqStack s;
	SElemType e;
	initStack_Sq(s);
	for(int i=0;i<5;i++){
        printf("Input an element:\n");
        cin>>e;
        push(s, e);
	}

    display(s);
	return 0;
}

